# Chemistry Bot for Telegram

Telegram-бот помощник для репетитора по химии с функциями управления учениками и лекциями.

## Структура проекта

```
avr_bot/
├── config.json          # Конфигурация (токен бота, ID администратора, настройки Redis)
├── bot.py               # Основной файл бота
├── requirements.txt     # Зависимости Python
├── lectures/            # Папка для хранения файлов лекций
└── readme.md            # Этот файл
```

## Требования

- Python 3.9+
- Redis (для локального тестирования)
- python-telegram-bot
- redis

## Установка

1. **Установите зависимости:**

```bash
pip install -r requirements.txt
```

2. **Установите и запустите Redis** (если его еще нет):

На macOS с Homebrew:
```bash
brew install redis
brew services start redis
```

3. **Настройте конфигурацию** в `config.json`:
   - Замените `YOUR_BOT_TOKEN_HERE` на токен вашего бота (@BotFather в Telegram)
   - Добавьте ID администратора (может быть несколько)

4. **Запустите бота:**

```bash
python bot.py
```

## Функциональность

### Для администратора

- **Добавить ученика** - Добавляет нового ученика с расписанием занятий
- **Информация об ученике** - Просмотр доступных лекций и расписания
- **Редактировать ученика** - Добавление/удаление лекций, изменение расписания
- **Добавить лекцию** - Загрузка файла лекции в базу данных
- **Удалить лекцию** - Удаление лекции из системы

### Для ученика

- **Моё расписание** - Просмотр своего расписания занятий
- **Доступные лекции** - Список и скачивание доступных лекций

## Команды

### Основные
- `/start` - Запуск бота и отображение меню в зависимости от роли пользователя

### Для администратора (автоматически доступны в меню)
- Все функции доступны через кнопки интерфейса

## Структура данных Redis

```
student:{user_id}              # JSON с данными ученика
├── username                   # Username ученика
├── schedule                   # Расписание
└── lectures                   # Список доступных лекций

lectures                       # Hash с лекциями (id -> название)
{lecture_id}:file             # Информация о файле лекции
```

## Пример использования

1. Администратор добавляет ученика:
   - Нажимает "Добавить ученика"
   - Вводит: `vasya пн,ср,пт 15:00-16:00`

2. Администратор добавляет лекцию:
   - Нажимает "Добавить лекцию"
   - Вводит название: `Периодическая таблица`
   - Отправляет файл лекции

3. Ученик может просмотреть свое расписание и скачать доступные лекции

## Развертывание на сервере

Для развертывания на сервере:

1. Используйте systemd service или supervisor для управления процессом
2. Используйте удаленный Redis (например, Redis Cloud)
3. Обновите `config.json` с адресом сервера Redis

Пример systemd service:

```ini
[Unit]
Description=Chemistry Bot
After=network.target

[Service]
Type=simple
User=botuser
WorkingDirectory=/opt/avr_bot
ExecStart=/usr/bin/python3 /opt/avr_bot/bot.py
Restart=always

[Install]
WantedBy=multi-user.target
```

## Возможные улучшения

- [ ] Добавить аутентификацию для администратора через пароль
- [ ] Реализовать отправку напоминаний об уроках
- [ ] Добавить логирование активности учеников
- [ ] Создать веб-интерфейс для администратора
- [ ] Поддержка различных форматов лекций (PDF, видео)
- [ ] Система оценок и домашних заданий

## Лицензия

MIT
